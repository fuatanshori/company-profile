{% extends 'base.html' %}
{% load static %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/news.css' %}">
{% endblock styles %}

{% block topbar %}
{% include 'includes/topbar.html' with topbar_email=topbar_email topbar_phone_number=topbar_phone_number topbar_socials=topbar_socials %}
{% endblock topbar %}

{% block content %}
 <!-- Page content-->
 <div class="container py-3">
    <div class="row">
        <!-- Blog entries-->
        <div class="col-lg-11 mx-auto">
            <div id="carouselExampleCaptions" class="carousel slide mb-4">
                <div class="carousel-indicators">
                    <div class="carousel-indicators">
                        {% for  crousel in crousels %}
                        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="{{forloop.counter0}}" class="{% if forloop.first %}active {% else %} {% endif %}"  aria-label="Slide {{forloop.counter}}"></button>
                        {% endfor %}
                    </div>
                </div>
                <div class="carousel-inner">
                    {% for  crousel in crousels %}
                        <div class="carousel-item {% if forloop.first %}active{% endif %}">
                            <div class="carousel-image">
                                <img he src=" {% if crousel.news_image %} {{ crousel.news_image.url }} {% else %}{% endif %}" class="d-block w-100" style="max-height: 300px;" >
                            </div>
                            <div class="carousel-caption d-none d-md-block">
                                <h3 class="fw-bolder h4 text-white">{{ crousel.news_title }}</h3>
                                <p>{{crousel.created_at|date:"F y"}}</p>
                            </div>
                        </div>
                    {% endfor %}
                  
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>
              </div>
            <!-- Nested row for non-featured blog posts-->
            <div class="row">
                {% for news in newss %}
                <div class="col-sm-4">
                    <!-- Blog post-->
                    <div class="card custom-card mb-4">
                        {% if news.news_image %} 
                        <a href="{% url 'news:news-detail' id=news.id %}"><img class="card-img-top" src="{{ news.news_image.url }}" height="170px" /></a>
                        <div class="card-body">
                            <a href="{% url 'news:news-detail' id=news.id %}" class="nav-link text-primary "><h2 class="card-title fw-semibold my-1 h4">{{news.news_title|truncatechars:30}}</h2></a>
                            <div class="small text-muted my-2">{{news.created_at}}</div>
                            <p class="card-text">{{news.news_description|truncatechars:140}}</p>
                            <a class="btn btn-primary" href="{% url 'news:news-detail' id=news.id %}">Read more →</a>
                        </div>
                        {% else %}
                        <div class="card-body">
                            <a href="{% url 'news:news-detail' id=news.id %}" class="nav-link text-primary "><h2 class="card-title fw-semibold my-1 h4">{{news.news_title|truncatechars:30}}</h2></a>
                            <div class="small text-muted my-2">{{news.created_at}}</div>
                            <p class="card-text">{{news.news_description|truncatechars:350}} 
                            </p>
                        </div>
                        <div class="card-body">
                            <a class="btn btn-primary" href="{% url 'news:news-detail' id=news.id %}">Read more →</a>

                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
            
            {% include 'includes/pagination.html' with queryset=newss custom_range=custom_range %}

        </div>

    </div>
</div>
{% endblock content %}